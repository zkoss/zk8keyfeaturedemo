<?xml version="1.0" encoding="UTF-8"?>

<zk>
	<client-config>
		<data-handler>
			<name>slimscroll</name>
			<depends>/keyfeature1/scripts/jquery.slimscroll.min.js </depends>
			<script>
				function(wgt, dataValue) {
					jq(wgt).slimScroll(dataValue);
				}
			</script>
		</data-handler>
		<data-handler>
			<name>labelauty</name>
			<depends>/keyfeature3/scripts/auty/jquery-labelauty.js</depends>
			<script>
				function (wgt, dataValue) {
					jq(wgt._subnodes.real).labelauty(dataValue);
				}
			</script>
		</data-handler>
		<data-handler>
			<name>syntax-highlight</name>
			<depends>/keyfeature3/scripts/hightlights/highlight.min.js</depends>
			<script>
				function (wgt, dataValue) {
					hljs.configure(dataValue);
					jq(wgt.$n()).each(function(i, block) {
					    hljs.highlightBlock(block);
					});
					wgt.setOverride("setValue", function(dataValue) {
						this.$setValue(dataValue);
						jq(wgt.$n()).each(function(i, block) {
						    hljs.highlightBlock(block);
						});
					});
				}
			</script>
		</data-handler>
		<data-handler>
			<name>markdown</name>
			<depends>/keyfeature3/scripts/markdown/showdown.min.js</depends>
			<script>
				function (wgt, dataValue) {
					var converter = new showdown.Converter();
					wgt.$n().innerHTML = converter.makeHtml(wgt.getValue());
					wgt.setOverride("setValue", function(value) {
						this.$setValue(value);
						this.$n().innerHTML = converter.makeHtml(value);
					});
				}
			</script>
		</data-handler>
		<data-handler>
			<name>mask</name>
			<depends>/keyfeature3/scripts/mask/jquery.mask.min.js</depends>
			<script>
				function (wgt, dataValue) {
					jq(wgt.$n()).mask(dataValue);
					wgt.listen({onChange: function (event) {
						event.data.value = jq(this.$n()).cleanVal();
					}});
				}
			</script>
		</data-handler>
		<data-handler>
			<name>easypiechart</name>
			<depends>/keyfeature3/scripts/easypiechart/jquery.easy-pie-chart.js</depends>
			<script>
				function (wgt, dataValue) {
					var configuration = dataValue.length > 0 ? $.evalJSON(dataValue) : {},
						$w = jq(wgt.$n()),
						size = $w.data('size'),
						label = $w.find('span'),
						defaultConfig = { //Change the text by step (Animation)
							onStep: function(value) {
								label.text(~~value + '%');
							},
							onStop: function(from, to) {
								label.text(~~to + '%');
							}
						};
				
					$.extend(configuration, defaultConfig, size ? {size: size} : {});
					$w.easyPieChart(configuration);
				
					var self = this;
					if (self.after) {
						self.after('$clientUpdate', function (evt) {
							if (evt != null)
								$w.data('easyPieChart').update(evt);
						});
					}
				}
			</script>
		</data-handler>
	    <data-handler>
			<name>codeMirror</name>
            <depends>https://cdn.rawgit.com/codemirror/CodeMirror/master/lib/codemirror.js</depends>
       		<depends>https://cdn.rawgit.com/codemirror/CodeMirror/master/mode/xml/xml.js</depends>
            <script>
            function(wgt, dataValue) {
            		var myTextArea = wgt.$n();
					editor = CodeMirror.fromTextArea(myTextArea, 
						{lineNumbers: true, mode: "xml", textWrapping: true, readOnly:true}
					);
					editor.setSize("auto","auto");
			}
    </script>
	    </data-handler>
	</client-config>
</zk>
